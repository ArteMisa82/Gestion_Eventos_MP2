# ğŸ” RESUMEN VISUAL - Flujo de RecuperaciÃ³n de ContraseÃ±a

## ğŸ“± Flujo de Usuario - Vista Completa

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ğŸ  PÃGINA DE LOGIN                           â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ Email: [usuario@gmail.com              ]              â”‚    â”‚
â”‚  â”‚ ContraseÃ±a: [**********                ]              â”‚    â”‚
â”‚  â”‚                                                        â”‚    â”‚
â”‚  â”‚        [Iniciar SesiÃ³n]                               â”‚    â”‚
â”‚  â”‚                                                        â”‚    â”‚
â”‚  â”‚ Â¿No tienes cuenta? â†’ RegÃ­strate                       â”‚    â”‚
â”‚  â”‚ Â¿Olvidaste tu contraseÃ±a? â†’ ğŸ‘ˆ CLIC AQUÃ             â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               ğŸ“§ MODAL DE RECUPERACIÃ“N                          â”‚
â”‚                                                                  â”‚
â”‚  "Recuperar contraseÃ±a"                                      âœ• â”‚
â”‚                                                                  â”‚
â”‚  Ingresa tu correo electrÃ³nico y te enviaremos un enlace para  â”‚
â”‚  restablecer tu contraseÃ±a.                                    â”‚
â”‚                                                                  â”‚
â”‚  Email: [usuario@gmail.com              ]                      â”‚
â”‚                                                                  â”‚
â”‚  [Cancelar]  [Enviar enlace]                                   â”‚
â”‚                                                                  â”‚
â”‚  âš ï¸ ValidaciÃ³n: Â¿Es @uta.edu.ec?                               â”‚
â”‚     SÃ â†’ Alerta inmediata + no envÃ­a                           â”‚
â”‚     NO â†’ EnvÃ­a al backend                                      â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”œâ”€â†’ Si es @uta.edu.ec:
         â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚   â”‚ âš ï¸  Correo Institucional             â”‚
         â”‚   â”‚                                      â”‚
         â”‚   â”‚ No es posible recuperar la           â”‚
         â”‚   â”‚ contraseÃ±a para correos             â”‚
         â”‚   â”‚ institucionales (@uta.edu.ec).      â”‚
         â”‚   â”‚                                      â”‚
         â”‚   â”‚ AcÃ©rquese a la DTIC                 â”‚
         â”‚   â”‚          [OK]                        â”‚
         â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â””â”€â†’ Si es correo normal:
             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ğŸ”„ BACKEND PROCESA SOLICITUD                       â”‚
â”‚                                                                  â”‚
â”‚  1. Valida @uta.edu.ec nuevamente (seguridad)                 â”‚
â”‚  2. Busca usuario con ese correo                               â”‚
â”‚  3. Genera token seguro (crypto.randomBytes)                   â”‚
â”‚  4. Guarda en tabla password_reset                             â”‚
â”‚  5. Token vÃ¡lido por 1 HORA                                    â”‚
â”‚  6. EnvÃ­a email con enlace personalizado                       â”‚
â”‚                                                                  â”‚
â”‚  Token en BD:                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚ ID â”‚ ID_USU â”‚ TOKEN      â”‚ EXPIRES_AT        â”‚            â”‚
â”‚  â”‚ 1  â”‚ 5      â”‚ a7b2f9...  â”‚ 2024-12-09 21:30 â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ğŸ“§ EMAIL ENVIADO                             â”‚
â”‚                                                                  â”‚
â”‚  Asunto: RecuperaciÃ³n de ContraseÃ±a - GestiÃ³n Eventos UTA      â”‚
â”‚                                                                  â”‚
â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—  â”‚
â”‚  â•‘                                                          â•‘  â”‚
â”‚  â•‘        [GESTIÃ“N EVENTOS UTA - LOGO]                    â•‘  â”‚
â”‚  â•‘                                                          â•‘  â”‚
â”‚  â•‘    ğŸ” RecuperaciÃ³n de ContraseÃ±a                        â•‘  â”‚
â”‚  â•‘                                                          â•‘  â”‚
â”‚  â•‘  Hemos recibido una solicitud para restablecer tu       â•‘  â”‚
â”‚  â•‘  contraseÃ±a en GestiÃ³n Eventos UTA.                    â•‘  â”‚
â”‚  â•‘                                                          â•‘  â”‚
â”‚  â•‘  [Restablecer ContraseÃ±a] â†â† BOTÃ“N INTERACTIVO         â•‘  â”‚
â”‚  â•‘                                                          â•‘  â”‚
â”‚  â•‘  Este enlace expirarÃ¡ en 1 HORA                         â•‘  â”‚
â”‚  â•‘                                                          â•‘  â”‚
â”‚  â•‘  Si no solicitaste esto, ignora este email.             â•‘  â”‚
â”‚  â•‘                                                          â•‘  â”‚
â”‚  â•‘  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â•‘  â”‚
â”‚  â•‘                                                          â•‘  â”‚
â”‚  â•‘  Â© 2024 GestiÃ³n Eventos UTA                            â•‘  â”‚
â”‚  â•‘                                                          â•‘  â”‚
â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚                                                                  â”‚
â”‚  Enlace en el email:                                            â”‚
â”‚  http://localhost:3000/restablecer/a7b2f9e1c5...              â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            âœ… MODAL DE Ã‰XITO EN FRONTEND                        â”‚
â”‚                                                                  â”‚
â”‚  [âœ“] Ã‰xito                                                      â”‚
â”‚                                                                  â”‚
â”‚  Se ha enviado un enlace de recuperaciÃ³n a tu correo.          â”‚
â”‚  VÃ¡lido por 1 hora.                                            â”‚
â”‚                                                                  â”‚
â”‚                      [OK]                                       â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           ğŸ”— USUARIO ABRE ENLACE DEL EMAIL                     â”‚
â”‚                                                                  â”‚
â”‚  Navegador: http://localhost:3000/restablecer/a7b2f9e1c5...   â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  Verificando enlace de recuperaciÃ³n...              â”‚        â”‚
â”‚  â”‚                                                     â”‚        â”‚
â”‚  â”‚  [â³ SPINNER GIRANDO]                               â”‚        â”‚
â”‚  â”‚                                                     â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                                  â”‚
â”‚  Backend verifica:                                              â”‚
â”‚  âœ“ Token existe en BD                                          â”‚
â”‚  âœ“ Token no estÃ¡ expirado                                      â”‚
â”‚  âœ“ Pertenece a un usuario vÃ¡lido                               â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          ğŸ”’ FORMULARIO DE NUEVA CONTRASEÃ‘A                     â”‚
â”‚                                                                  â”‚
â”‚         [ğŸ” ICONO]                                             â”‚
â”‚                                                                  â”‚
â”‚         Restablecer ContraseÃ±a                                  â”‚
â”‚         Ingresa tu nueva contraseÃ±a                             â”‚
â”‚                                                                  â”‚
â”‚  Nueva contraseÃ±a:                                              â”‚
â”‚  [MÃ­nimo 6 caracteres          ] [ğŸ‘ï¸  mostrar]                â”‚
â”‚                                                                  â”‚
â”‚  Confirmar contraseÃ±a:                                          â”‚
â”‚  [********************        ] [ğŸ‘ï¸  mostrar]                â”‚
â”‚                                                                  â”‚
â”‚                                                                  â”‚
â”‚  [Restablecer contraseÃ±a]                                       â”‚
â”‚                                                                  â”‚
â”‚  ğŸ”’ Tu contraseÃ±a debe tener al menos 6 caracteres             â”‚
â”‚     y ser segura                                                â”‚
â”‚                                                                  â”‚
â”‚  âš ï¸ Validaciones activas:                                       â”‚
â”‚     â€¢ MÃ­nimo 6 caracteres                                       â”‚
â”‚     â€¢ Las dos contraseÃ±as deben coincidir                       â”‚
â”‚     â€¢ No puede estar vacÃ­a                                      â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         âš™ï¸ BACKEND ACTUALIZA CONTRASEÃ‘A (EN TRANSACCIÃ“N)        â”‚
â”‚                                                                  â”‚
â”‚  1. Busca token en BD                                           â”‚
â”‚  2. Verifica que NO estÃ© expirado                               â”‚
â”‚  3. Obtiene ID del usuario                                      â”‚
â”‚  4. Hashea nueva contraseÃ±a con bcrypt                          â”‚
â”‚  5. TRANSACCIÃ“N ATÃ“MICA:                                        â”‚
â”‚     â”œâ”€ UPDATE usuarios.pas_usu = hash_nuevo                    â”‚
â”‚     â””â”€ DELETE password_reset.token                              â”‚
â”‚  6. Devuelve Ã©xito al frontend                                  â”‚
â”‚                                                                  â”‚
â”‚  Antes:                    DespuÃ©s:                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚ pas_usu:         â”‚     â”‚ pas_usu:         â”‚                â”‚
â”‚  â”‚ $2b$10$old...   â”‚ --> â”‚ $2b$10$new...   â”‚                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                                                                  â”‚
â”‚  password_reset:           password_reset:                      â”‚
â”‚  token eliminado           (el registro se borra)              â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            âœ… ALERTA DE Ã‰XITO EN FRONTEND                       â”‚
â”‚                                                                  â”‚
â”‚  Â¡Ã‰xito!                                                        â”‚
â”‚                                                                  â”‚
â”‚  Tu contraseÃ±a ha sido restablecida correctamente.             â”‚
â”‚  Ahora puedes iniciar sesiÃ³n.                                  â”‚
â”‚                                                                  â”‚
â”‚                      [OK]                                       â”‚
â”‚                                                                  â”‚
â”‚  (Redirige automÃ¡ticamente a /home)                             â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  ğŸ‰ USUARIO LOGUEADO                            â”‚
â”‚                                                                  â”‚
â”‚  Email: usuario@gmail.com                                       â”‚
â”‚  ContraseÃ±a: [nueva contraseÃ±a]                                 â”‚
â”‚                                                                  â”‚
â”‚  âœ“ Login exitoso!                                               â”‚
â”‚                                                                  â”‚
â”‚  Bienvenido usuario! ğŸ“                                        â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Casos Especiales

### Caso 1: Email @uta.edu.ec
```
Usuario ingresa: admin@uta.edu.ec
         â†“
Frontend detecta .endsWith('@uta.edu.ec')
         â†“
Alerta inmediata: "AcÃ©rquese a la DTIC"
         â†“
No envÃ­a solicitud al backend
         â†“
Modal permanece abierto, usuario puede probar otro email
```

### Caso 2: Token Expirado
```
Token fue generado hace 1 hora y 5 minutos
         â†“
Usuario abre enlace del email
         â†“
PÃ¡gina carga, verifica token
         â†“
Backend valida: expires_at < now()
         â†“
Elimina token automÃ¡ticamente
         â†“
Alerta: "El enlace ha expirado. Solicita uno nuevo."
         â†“
Redirige a /home
```

### Caso 3: Token InvÃ¡lido/Falso
```
Usuario intenta: /restablecer/token-falso-123
         â†“
PÃ¡gina carga, verifica token
         â†“
Backend busca en BD, no encuentra
         â†“
Alerta: "Token invÃ¡lido"
         â†“
Redirige a /home
```

### Caso 4: ContraseÃ±a No Coincide
```
Usuario ingresa:
  Nueva: "miPassword123"
  Confirmar: "miPassword456"
         â†“
Frontend valida al hacer clic en botÃ³n
         â†“
Alerta: "Las contraseÃ±as no coinciden"
         â†“
No envÃ­a al backend
```

---

## ğŸ—„ï¸ Estructura de Base de Datos

### Tabla: usuarios
```sql
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ USUARIOS                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id_usu        â”‚ INT                    [PK]    â”‚
â”‚ cor_usu       â”‚ VARCHAR(100)           [UNIQUE]â”‚
â”‚ pas_usu       â”‚ VARCHAR(255)           [HASH]  â”‚
â”‚ nom_usu       â”‚ VARCHAR(50)                    â”‚
â”‚ ape_usu       â”‚ VARCHAR(50)                    â”‚
â”‚ ... otras columnas ...                        â”‚
â”‚ password_resetâ”‚ FK â†’ password_reset.id        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Tabla: password_reset (NUEVA)
```sql
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PASSWORD_RESET                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id              â”‚ INT                  [PK]    â”‚
â”‚ id_usu          â”‚ INT                  [FK,U]  â”‚
â”‚ token           â”‚ VARCHAR(255)         [UNIQUE]â”‚
â”‚ expires_at      â”‚ TIMESTAMP                    â”‚
â”‚ created_at      â”‚ TIMESTAMP [DEFAULT now()]   â”‚
â”‚                                                â”‚
â”‚ INDEXES:                                       â”‚
â”‚ - idx_password_reset_token (BÃšSQUEDA RÃPIDA)  â”‚
â”‚ - idx_password_reset_usuario                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### RelaciÃ³n
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      USUARIOS        â”‚        â”‚  PASSWORD_RESET      â”‚
â”‚                      â”‚        â”‚                      â”‚
â”‚ id_usu [PK]      â”€â”€â”€â”¼â”€â”€â”€â”€â”¬â”€â”€â”¤ id_usu [FK, UNIQUE]  â”‚
â”‚ cor_usu              â”‚    â”‚   â”‚ token [UNIQUE]      â”‚
â”‚ pas_usu              â”‚    â”‚   â”‚ expires_at          â”‚
â”‚ ...                  â”‚    â”‚   â”‚ created_at          â”‚
â”‚                      â”‚    â””â”€â”€â”¤ id                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

CaracterÃ­sticas:
- 1-a-1: MÃ¡ximo 1 token activo por usuario
- Cascada: Si usuario se elimina, token tambiÃ©n
- UNIQUE: No hay duplicados de token o id_usu en password_reset
```

---

## ğŸ” Seguridad - Diagrama de Validaciones

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   SOLICITUD DE RECUPERACIÃ“N                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ VALIDACIÃ“N 1: CLIENTE (Frontend)       â”‚
        â”‚ Â¿Es @uta.edu.ec?                       â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚ SÃ â†’ Bloquea, muestra alerta           â”‚
        â”‚ NO â†’ ContinÃºa                           â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ VALIDACIÃ“N 2: SERVIDOR (Backend)       â”‚
        â”‚ Â¿Es @uta.edu.ec?                       â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚ SÃ â†’ Rechaza, devuelve 403             â”‚
        â”‚ NO â†’ ContinÃºa                           â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ VALIDACIÃ“N 3: USUARIO EXISTE            â”‚
        â”‚ SELECT * FROM usuarios WHERE cor_usu   â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚ NO EXISTE â†’ OK mismo (sin revelar)     â”‚
        â”‚ EXISTE â†’ Genera token, envÃ­a email     â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ VALIDACIÃ“N 4: GENERACIÃ“N DE TOKEN       â”‚
        â”‚ crypto.randomBytes(32).toString('hex') â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚ âœ“ 64 caracteres aleatorios             â”‚
        â”‚ âœ“ Ãšnico (UNIQUE en BD)                 â”‚
        â”‚ âœ“ VÃ¡lido por 1 hora                    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ VALIDACIÃ“N 5: EMAIL ENVIADO             â”‚
        â”‚ Via nodemailer (SMTP)                   â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚ Dev: Muestra en consola                 â”‚
        â”‚ Prod: EnvÃ­a a cuenta real               â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    RESTABLECIMIENTO DE CONTRASEÃ‘A               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ VALIDACIÃ“N 1: FORMATO DE CONTRASEÃ‘A     â”‚
        â”‚ length >= 6                             â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚ NO â†’ Error                              â”‚
        â”‚ SÃ â†’ ContinÃºa                           â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ VALIDACIÃ“N 2: TOKEN EXISTE              â”‚
        â”‚ SELECT * FROM password_reset WHERE tokenâ”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚ NO â†’ Error "Token invÃ¡lido"            â”‚
        â”‚ SÃ â†’ ContinÃºa                           â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ VALIDACIÃ“N 3: TOKEN NO EXPIRADO         â”‚
        â”‚ expires_at > now()                      â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚ SÃ â†’ Error "Expirado"                  â”‚
        â”‚ NO â†’ ContinÃºa                           â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ VALIDACIÃ“N 4: HASH DE CONTRASEÃ‘A        â”‚
        â”‚ await hashPassword(newPassword)        â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚ bcrypt con salt rounds = 10             â”‚
        â”‚ Genera: $2b$10$... (irreversible)      â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ VALIDACIÃ“N 5: TRANSACCIÃ“N ATÃ“MICA       â”‚
        â”‚ prisma.$transaction()                   â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚ UPDATE usuarios.pas_usu = hash          â”‚
        â”‚ DELETE password_reset.token             â”‚
        â”‚                                         â”‚
        â”‚ Todo-o-nada: no hay estado intermedio  â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Diagrama de Tokens

```
LÃNEA DE TIEMPO DEL TOKEN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Momento de creaciÃ³n: 20:30:00
â”œâ”€ Token generado: a7b2f9e1c5d8...
â”œâ”€ Guardado en BD
â”œâ”€ Email enviado
â”‚
â”œâ”€ 20:30 - 21:00: VÃLIDO âœ…
â”‚ Usuario puede cambiar contraseÃ±a
â”‚
â”œâ”€ 21:00: â° EXPIRA
â”‚ Token ya no es vÃ¡lido
â”‚
â””â”€ 21:01+: EXPIRADO âŒ
  Intento de uso â†’ EliminaciÃ³n automÃ¡tica

MÃšLTIPLES TOKENS POR USUARIO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Usuario solicita recuperaciÃ³n:
Token 1: a7b2f9... (guardado)
         â†“
Usuario solicita otra (olvidÃ³ hacer clic):
Token 1: ELIMINADO automÃ¡ticamente
Token 2: b8c3f0... (guardado)
         â†“
Usuario solicita otra:
Token 2: ELIMINADO automÃ¡ticamente
Token 3: c9d4f1... (guardado)

MÃ¡ximo 1 token activo por usuario en cualquier momento.
```

---

## ğŸ¯ Resumen de Cambios TÃ©cnicos

| Componente | Antes | DespuÃ©s |
|-----------|--------|---------|
| **Token Storage** | Campo PDF_CED_USU (temporal) | Tabla password_reset (permanente) |
| **GeneraciÃ³n Token** | TokenUtil (no encontrado) | crypto.randomBytes(32) |
| **ExpiraciÃ³n** | No tenÃ­a | 1 hora con TIMESTAMP |
| **Email URL** | /reset-password?token=X | /restablecer/{token} |
| **ValidaciÃ³n @uta** | Controlador Backend | Frontend + Backend |
| **BD Integridad** | Sin transacciones | prisma.$transaction() |
| **RelaciÃ³n Usuarios** | Ninguna | Foreign Key 1-a-1 |

---

## âœ¨ CaracterÃ­sticas Implementadas

```
âœ… Tokens Ãºnicos y seguros (64 caracteres hex)
âœ… ExpiraciÃ³n de 1 hora
âœ… EliminaciÃ³n automÃ¡tica de tokens vencidos
âœ… ValidaciÃ³n de dominio @uta.edu.ec (doble)
âœ… Email profesional con branding UTA
âœ… Formulario de reset password con validaciones
âœ… Transacciones atÃ³micas en BD
âœ… Hasheo de contraseÃ±a con bcrypt
âœ… Mensajes de error claros
âœ… Redirecciones automÃ¡ticas
âœ… Compatibilidad desarrollo/producciÃ³n
âœ… Ãndices de BD para performance
âœ… DocumentaciÃ³n completa
```

ğŸ‰ **Â¡Sistema completo listo para usar!**
